import './nvd3.scss'
import './chartD3Demo.scss'
import ChartD3RealTime from '../components/chartD3/'

function getChartZoomed(context) {
    var W = 960, H = 350;

    //Setting up Margins
    var mainMargin = { top: 10, right: 10, left: 70, bottom: 140 };
    var subMargin = { top: 250, right: 10, bottom: 40, left: 70 };

    //Widths, Heights
    var width = W - mainMargin.left - mainMargin.right;
    var mainHeight = H - mainMargin.top - mainMargin.bottom;
    var subHeight = H - subMargin.top - subMargin.bottom;

    //Date Parser
    var parseDate = d3.time.format("%b %Y").parse;

    //Main Chart Scales
    var mainXScale = d3.time.scale().range([0, width]);
    var mainYScale = d3.scale.linear().range([mainHeight, 0]);

    //Sub Chart scales
    var subXScale = d3.time.scale().range([0, width]);
    var subYScale = d3.scale.linear().range([subHeight, 0]);

    //Main Chart Axes
    var mainXAxis = d3.svg.axis().scale(mainXScale).orient('bottom');
    var mainYAxis = d3.svg.axis().scale(mainYScale).orient('left');

    //Sub Chart Axes
    var subXAxis = d3.svg.axis().scale(subXScale).orient('bottom');
    var subYAxis = d3.svg.axis().scale(subYScale).orient('left').ticks(2);

    //Area
    var mainArea = d3.svg.area()
        .interpolate('monotone')
        .x(function (d) {
            return mainXScale(d.date)
        })
        .y0(mainHeight)
        .y1(function (d) {
            return mainYScale(d.price)
        });

    var subArea = d3.svg.area()
        .interpolate('monotone')
        .x(function (d) {
            return subXScale(d.date)
        })
        .y0(subHeight)
        .y1(function (d) {
            return subYScale(d.price)
        });

    var svg = d3.select(context.refs.chartWithZoom)
        .attr('width', W)
        .attr('height', H);

    svg.append('defs')
        .append('clipPath')
        .attr('id', 'clip')
        .append('rect')
        .attr('width', width)
        .attr('height', mainHeight);

    var main = svg.append('g')
        .classed('main', true)
        .attr("transform", "translate(" + mainMargin.left + "," + mainMargin.top + ")");

    var sub = svg.append('g')
        .classed('sub', true)
        .attr("transform", "translate(" + subMargin.left + "," + subMargin.top + ")");

    var brush = d3.svg.brush()
        .x(subXScale)
        .on("brush", brushed);

    // const data = [{ "date": "Jan 2000", "price": 1394.46 }, { "date": "Feb 2000", "price": 1366.42 }, { "date": "Mar 2000", "price": 1498.58 }, { "date": "Apr 2000", "price": 1452.43 }, { "date": "May 2000", "price": 1420.6 }, { "date": "Jun 2000", "price": 1454.6 }, { "date": "Jul 2000", "price": 1430.83 }, { "date": "Aug 2000", "price": 1517.68 }, { "date": "Sep 2000", "price": 1436.51 }, { "date": "Oct 2000", "price": 1429.4 }, { "date": "Nov 2000", "price": 1314.95 }, { "date": "Dec 2000", "price": 1320.28 }, { "date": "Jan 2001", "price": 1366.01 }, { "date": "Feb 2001", "price": 1239.94 }, { "date": "Mar 2001", "price": 1160.33 }, { "date": "Apr 2001", "price": 1249.46 }, { "date": "May 2001", "price": 1255.82 }, { "date": "Jun 2001", "price": 1224.38 }, { "date": "Jul 2001", "price": 1211.23 }, { "date": "Aug 2001", "price": 1133.58 }, { "date": "Sep 2001", "price": 1040.94 }, { "date": "Oct 2001", "price": 1059.78 }, { "date": "Nov 2001", "price": 1139.45 }, { "date": "Dec 2001", "price": 1148.08 }, { "date": "Jan 2002", "price": 1130.2 }, { "date": "Feb 2002", "price": 1106.73 }, { "date": "Mar 2002", "price": 1147.39 }, { "date": "Apr 2002", "price": 1076.92 }, { "date": "May 2002", "price": 1067.14 }, { "date": "Jun 2002", "price": 989.82 }, { "date": "Jul 2002", "price": 911.62 }, { "date": "Aug 2002", "price": 916.07 }, { "date": "Sep 2002", "price": 815.28 }, { "date": "Oct 2002", "price": 885.76 }, { "date": "Nov 2002", "price": 936.31 }, { "date": "Dec 2002", "price": 879.82 }, { "date": "Jan 2003", "price": 855.7 }, { "date": "Feb 2003", "price": 841.15 }, { "date": "Mar 2003", "price": 848.18 }, { "date": "Apr 2003", "price": 916.92 }, { "date": "May 2003", "price": 963.59 }, { "date": "Jun 2003", "price": 974.5 }, { "date": "Jul 2003", "price": 990.31 }, { "date": "Aug 2003", "price": 1008.01 }, { "date": "Sep 2003", "price": 995.97 }, { "date": "Oct 2003", "price": 1050.71 }, { "date": "Nov 2003", "price": 1058.2 }, { "date": "Dec 2003", "price": 1111.92 }, { "date": "Jan 2004", "price": 1131.13 }, { "date": "Feb 2004", "price": 1144.94 }, { "date": "Mar 2004", "price": 1126.21 }, { "date": "Apr 2004", "price": 1107.3 }, { "date": "May 2004", "price": 1120.68 }, { "date": "Jun 2004", "price": 1140.84 }, { "date": "Jul 2004", "price": 1101.72 }, { "date": "Aug 2004", "price": 1104.24 }, { "date": "Sep 2004", "price": 1114.58 }, { "date": "Oct 2004", "price": 1130.2 }, { "date": "Nov 2004", "price": 1173.82 }, { "date": "Dec 2004", "price": 1211.92 }, { "date": "Jan 2005", "price": 1181.27 }, { "date": "Feb 2005", "price": 1203.6 }, { "date": "Mar 2005", "price": 1180.59 }, { "date": "Apr 2005", "price": 1156.85 }, { "date": "May 2005", "price": 1191.5 }, { "date": "Jun 2005", "price": 1191.33 }, { "date": "Jul 2005", "price": 1234.18 }, { "date": "Aug 2005", "price": 1220.33 }, { "date": "Sep 2005", "price": 1228.81 }, { "date": "Oct 2005", "price": 1207.01 }, { "date": "Nov 2005", "price": 1249.48 }, { "date": "Dec 2005", "price": 1248.29 }, { "date": "Jan 2006", "price": 1280.08 }, { "date": "Feb 2006", "price": 1280.66 }, { "date": "Mar 2006", "price": 1294.87 }, { "date": "Apr 2006", "price": 1310.61 }, { "date": "May 2006", "price": 1270.09 }, { "date": "Jun 2006", "price": 1270.2 }, { "date": "Jul 2006", "price": 1276.66 }, { "date": "Aug 2006", "price": 1303.82 }, { "date": "Sep 2006", "price": 1335.85 }, { "date": "Oct 2006", "price": 1377.94 }, { "date": "Nov 2006", "price": 1400.63 }, { "date": "Dec 2006", "price": 1418.3 }, { "date": "Jan 2007", "price": 1438.24 }, { "date": "Feb 2007", "price": 1406.82 }, { "date": "Mar 2007", "price": 1420.86 }, { "date": "Apr 2007", "price": 1482.37 }, { "date": "May 2007", "price": 1530.62 }, { "date": "Jun 2007", "price": 1503.35 }, { "date": "Jul 2007", "price": 1455.27 }, { "date": "Aug 2007", "price": 1473.99 }, { "date": "Sep 2007", "price": 1526.75 }, { "date": "Oct 2007", "price": 1549.38 }, { "date": "Nov 2007", "price": 1481.14 }, { "date": "Dec 2007", "price": 1468.36 }, { "date": "Jan 2008", "price": 1378.55 }, { "date": "Feb 2008", "price": 1330.63 }, { "date": "Mar 2008", "price": 1322.7 }, { "date": "Apr 2008", "price": 1385.59 }, { "date": "May 2008", "price": 1400.38 }, { "date": "Jun 2008", "price": 1280 }, { "date": "Jul 2008", "price": 1267.38 }, { "date": "Aug 2008", "price": 1282.83 }, { "date": "Sep 2008", "price": 1166.36 }, { "date": "Oct 2008", "price": 968.75 }, { "date": "Nov 2008", "price": 896.24 }, { "date": "Dec 2008", "price": 903.25 }, { "date": "Jan 2009", "price": 825.88 }, { "date": "Feb 2009", "price": 735.09 }, { "date": "Mar 2009", "price": 797.87 }, { "date": "Apr 2009", "price": 872.81 }, { "date": "May 2009", "price": 919.14 }, { "date": "Jun 2009", "price": 919.32 }, { "date": "Jul 2009", "price": 987.48 }, { "date": "Aug 2009", "price": 1020.62 }, { "date": "Sep 2009", "price": 1057.08 }, { "date": "Oct 2009", "price": 1036.19 }, { "date": "Nov 2009", "price": 1095.63 }, { "date": "Dec 2009", "price": 1115.1 }, { "date": "Jan 2010", "price": 1073.87 }, { "date": "Feb 2010", "price": 1104.49 }, { "date": "Mar 2010", "price": 1140.45 }]

    const data = [{"t":1486928844210,"v":0.30494334935440837},{"t":1486928846227,"v":0.34159303751848313},{"t":1486928848240,"v":0.51784772356871878},{"t":1486928850257,"v":0.43298561937780383},{"t":1486928852273,"v":0.78164859245608032},{"t":1486928854287,"v":0.89986585215659154},{"t":1486928856287,"v":0.880908830035901},{"t":1486928858303,"v":0.06410512610529788},{"t":1486928860320,"v":0.24973145977115793},{"t":1486928862337,"v":0.58404893129321234},{"t":1486928864350,"v":0.56165314724745841},{"t":1486928866367,"v":0.054146630714715753},{"t":1486928868380,"v":0.78426238465321363},{"t":1486928870397,"v":0.93027893310891419},{"t":1486928872397,"v":0.10619873465327487},{"t":1486928874397,"v":0.35598169563151044},{"t":1486928876413,"v":0.093557708474601486},{"t":1486928878427,"v":0.52609717311621507},{"t":1486928880443,"v":0.94388785629714278},{"t":1486928882460,"v":0.74985655199264012},{"t":1486928884460,"v":0.28113723466225771},{"t":1486928886477,"v":0.00942863058737881},{"t":1486928888477,"v":0.9698171582863746},{"t":1486928890490,"v":0.12582217581841265},{"t":1486928892507,"v":0.31374954353726914},{"t":1486928894523,"v":0.77592571907487029},{"t":1486928896537,"v":0.71419310323623619},{"t":1486928898553,"v":0.97608830359582244},{"t":1486928900570,"v":0.70106973019478369},{"t":1486928902587,"v":0.9007919257976077},{"t":1486928904600,"v":0.69454860859296685},{"t":1486928906617,"v":0.91891748268106832},{"t":1486928908633,"v":0.39084958908653333},{"t":1486928910647,"v":0.55830636367122943},{"t":1486928912647,"v":0.23073042474255451},{"t":1486928914663,"v":0.66106725747746753},{"t":1486928916677,"v":0.69214995656728273},{"t":1486928918693,"v":0.095175951297942527},{"t":1486928920693,"v":0.80867260452763767},{"t":1486928922693,"v":0.53174683755810692},{"t":1486928924693,"v":0.75596637872791217},{"t":1486928926693,"v":0.32147727036917456},{"t":1486928928710,"v":0.13435753906814266},{"t":1486928930727,"v":0.37310674431412794},{"t":1486928932740,"v":0.466841279746425},{"t":1486928934740,"v":0.33160287296939778},{"t":1486928936757,"v":0.29568457337826703},{"t":1486928938773,"v":0.46582284358601217},{"t":1486928940773,"v":0.79715471938119953},{"t":1486928942773,"v":0.038103076181422488},{"t":1486928944773,"v":0.59147020782878168},{"t":1486928946773,"v":0.90642551561185414},{"t":1486928948787,"v":0.126134136284764},{"t":1486928950803,"v":0.2780607353328079},{"t":1486928952820,"v":0.41772124423539325},{"t":1486928954820,"v":0.29551471876702956},{"t":1486928956837,"v":0.37177587923210853},{"t":1486928958850,"v":0.39202554775030612},{"t":1486928960867,"v":0.11923607584053468},{"t":1486928962867,"v":0.0057228733812099662},{"t":1486928964867,"v":0.18567274892035535},{"t":1486928966883,"v":0.9048205264400786},{"t":1486928968897,"v":0.36303539591051426},{"t":1486928970897,"v":0.34893953397355021},{"t":1486928972897,"v":0.88950032270024548},{"t":1486928974913,"v":0.64273566456639009},{"t":1486928976930,"v":0.66329704162818237},{"t":1486928978943,"v":0.22595602098198422},{"t":1486928980960,"v":0.69954850836635962},{"t":1486928982960,"v":0.44513147717580731},{"t":1486928984977,"v":0.66383173906422765},{"t":1486928986990,"v":0.998381757176659},{"t":1486928988990,"v":0.7174245685885775},{"t":1486928990990,"v":0.4121410187390358},{"t":1486928992990,"v":0.99389017326472806},{"t":1486928995007,"v":0.9596599642930832},{"t":1486928997023,"v":0.87507109151923612},{"t":1486928999037,"v":0.59671041397224667},{"t":1486929001053,"v":0.65898089607198762},{"t":1486929003070,"v":0.98214667056787142},{"t":1486929005070,"v":0.48024114569660331},{"t":1486929007070,"v":0.248370259650224},{"t":1486929009087,"v":0.17893358421462288},{"t":1486929011087,"v":0.66296665401336119},{"t":1486929013100,"v":0.30932171796882607},{"t":1486929015117,"v":0.78812309298111272},{"t":1486929017133,"v":0.79278334639630432},{"t":1486929019147,"v":0.11278885375372547},{"t":1486929021163,"v":0.14058511943583615},{"t":1486929023163,"v":0.935215705975525},{"t":1486929025180,"v":0.289291378245359},{"t":1486929027193,"v":0.30012440881697666},{"t":1486929029193,"v":0.9759398754574079},{"t":1486929031193,"v":0.80294973114642765},{"t":1486929033193,"v":0.34607408863775158},{"t":1486929035193,"v":0.85114585228783346},{"t":1486929037210,"v":0.95844187445866036},{"t":1486929039227,"v":0.78541800509459248},{"t":1486929041240,"v":0.48360642161388251},{"t":1486929043240,"v":0.82410561518003489},{"t":1486929045240,"v":0.66830583134121535},{"t":1486929047240,"v":0.069728552396282811},{"t":1486929049240,"v":0.7662743352196526},{"t":1486929051257,"v":0.35202324220539222},{"t":1486929053273,"v":0.37427133711719485},{"t":1486929055287,"v":0.59308845065212268},{"t":1486929057287,"v":0.18900094702327669},{"t":1486929059287,"v":0.71399311754572814},{"t":1486929061303,"v":0.28417056206807983},{"t":1486929063320,"v":0.45806127994231011},{"t":1486929065337,"v":0.42044362724779344},{"t":1486929067337,"v":0.77506546525986186},{"t":1486929069350,"v":0.73304465167831845},{"t":1486929071367,"v":0.13708940527266331},{"t":1486929073367,"v":0.52548172768460666},{"t":1486929075383,"v":0.93730248927013138},{"t":1486929077397,"v":0.7258869422254558},{"t":1486929079413,"v":0.70006874189715307},{"t":1486929081430,"v":0.039617816004724159},{"t":1486929083443,"v":0.10137722971913275},{"t":1486929085460,"v":0.84995231817008565},{"t":1486929087460,"v":0.550508187874457},{"t":1486929089460,"v":0.08537090154614807},{"t":1486929091477,"v":0.76433280239083468},{"t":1486929093490,"v":0.15584009893044834},{"t":1486929095490,"v":0.363707330247251},{"t":1486929097507,"v":0.022441881719251107},{"t":1486929099523,"v":0.91447483744214975},{"t":1486929101537,"v":0.066066930101284255},{"t":1486929103537,"v":0.14274432097689449},{"t":1486929105553,"v":0.0012180898344228462},{"t":1486929107570,"v":0.089653086424643674},{"t":1486929109587,"v":0.11310399235836416},{"t":1486929111600,"v":0.83487528089195273},{"t":1486929113617,"v":0.31384083922665607},{"t":1486929115617,"v":0.41051259330032047},{"t":1486929117617,"v":0.48209592443057148},{"t":1486929119633,"v":0.82691034200923064},{"t":1486929121647,"v":0.28869531689616634},{"t":1486929123663,"v":0.71623326731670334},{"t":1486929125663,"v":0.599122145957836},{"t":1486929127663,"v":0.0787902288505762},{"t":1486929129663,"v":0.8286182916856456},{"t":1486929131663,"v":0.682523839493526},{"t":1486929133663,"v":0.51477207872773156},{"t":1486929135680,"v":0.51422591298549714},{"t":1486929137697,"v":0.56707975713865821},{"t":1486929139710,"v":0.83885047018474457},{"t":1486929141727,"v":0.277468003461821},{"t":1486929143740,"v":0.40877159936762025},{"t":1486929145757,"v":0.12525891006237777},{"t":1486929147757,"v":0.25837313256150723},{"t":1486929149773,"v":0.74580018908986834},{"t":1486929151787,"v":0.38222919189474974},{"t":1486929153787,"v":0.97415329700994924},{"t":1486929155787,"v":0.11779764346675838},{"t":1486929157803,"v":0.98435765085013471},{"t":1486929159803,"v":0.0019415328288178578},{"t":1486929161820,"v":0.19618314327494388},{"t":1486929163837,"v":0.010564006869943816},{"t":1486929165850,"v":0.57064656893287158},{"t":1486929167867,"v":0.27452610958112689},{"t":1486929169883,"v":0.64792618744444386},{"t":1486929171897,"v":0.14142624109118537},{"t":1486929173897,"v":0.45684319010788721},{"t":1486929175913,"v":0.33079054082314974},{"t":1486929177913,"v":0.66196147290149776},{"t":1486929179930,"v":0.89816937078636572},{"t":1486929181947,"v":0.82324856604600727},{"t":1486929183960,"v":0.11496913438428619},{"t":1486929185977,"v":0.45520656483955985},{"t":1486929187977,"v":0.898976600216225},{"t":1486929189993,"v":0.41137342500098673},{"t":1486929192007,"v":0.3233845486880208},{"t":1486929194007,"v":0.50225508376129679},{"t":1486929196007,"v":0.77116208931950947},{"t":1486929198023,"v":0.72188989618881139},{"t":1486929200023,"v":0.402847062052622},{"t":1486929202037,"v":0.24956072366310317},{"t":1486929204053,"v":0.64161418594495123},{"t":1486929206070,"v":0.79662757310859278},{"t":1486929208087,"v":0.18359141153450656},{"t":1486929210100,"v":0.63700683398032876},{"t":1486929212117,"v":0.657295330733664},{"t":1486929214133,"v":0.017485410914516733},{"t":1486929216133,"v":0.74284495727291566},{"t":1486929218147,"v":0.34385289733477536},{"t":1486929220147,"v":0.73087480046361442},{"t":1486929222163,"v":0.86072198388200349},{"t":1486929224180,"v":0.19604319575989768},{"t":1486929226180,"v":0.42615494245018576},{"t":1486929228197,"v":0.48015439160175361},{"t":1486929230197,"v":0.63072719873428684},{"t":1486929232210,"v":0.27813131002622254},{"t":1486929234210,"v":0.14558669838383173},{"t":1486929236210,"v":0.32459603637670914},{"t":1486929238210,"v":0.43086404140613233},{"t":1486929240210,"v":0.6871920505944602},{"t":1486929242227,"v":0.22568064938563884},{"t":1486929244243,"v":0.18398153790458177},{"t":1486929246257,"v":0.85226444008399938},{"t":1486929248257,"v":0.6689103863522925},{"t":1486929250273,"v":0.015601904138737313},{"t":1486929252290,"v":0.16249886907753483},{"t":1486929254303,"v":0.95356503452806041},{"t":1486929256320,"v":0.22628230984615269},{"t":1486929258337,"v":0.84699970756052045},{"t":1486929260350,"v":0.42241564040184748},{"t":1486929262350,"v":0.879974108133453},{"t":1486929264350,"v":0.20299120769043974},{"t":1486929266367,"v":0.39590774727794703},{"t":1486929268383,"v":0.58151058879751272},{"t":1486929270383,"v":0.7523808091657147},{"t":1486929272383,"v":0.55456895732999267},{"t":1486929274383,"v":0.21393643376135102},{"t":1486929276397,"v":0.38705515739836505},{"t":1486929278413,"v":0.63751927560079813},{"t":1486929280430,"v":0.99063085671077988},{"t":1486929282430,"v":0.12394083017666863},{"t":1486929284430,"v":0.71399823283497166},{"t":1486929286447,"v":0.98693764348837443},{"t":1486929288447,"v":0.93108667243788334},{"t":1486929290460,"v":0.037447386904362306},{"t":1486929292477,"v":0.62720537028610956},{"t":1486929294493,"v":0.68881419193410043},{"t":1486929296507,"v":0.97505217323780624},{"t":1486929298507,"v":0.26824940148193827},{"t":1486929300507,"v":0.13324211497476424},{"t":1486929302507,"v":0.17779785030418907},{"t":1486929304523,"v":0.1776590473845876},{"t":1486929306540,"v":0.3402980479133772},{"t":1486929308553,"v":0.034697845594351108},{"t":1486929310553,"v":0.17716641266698316},{"t":1486929312553,"v":0.0655791857585214},{"t":1486929314553,"v":0.78934974586095186},{"t":1486929316570,"v":0.12771718675630037},{"t":1486929318587,"v":0.16798950739576923},{"t":1486929320600,"v":0.47450796490279396},{"t":1486929322600,"v":0.70373029620560368},{"t":1486929324600,"v":0.791203101068364},{"t":1486929326617,"v":0.8958452497123951},{"t":1486929328633,"v":0.92143725693292788},{"t":1486929330647,"v":0.85090069233016141},{"t":1486929332663,"v":0.65773077619156373},{"t":1486929334680,"v":0.80013544848195062},{"t":1486929336680,"v":0.844644353652673},{"t":1486929338680,"v":0.727773582436039},{"t":1486929340697,"v":0.076158241404294155},{"t":1486929342710,"v":0.064194876264871512},{"t":1486929344727,"v":0.75853154098546671},{"t":1486929346727,"v":0.68707676077591107},{"t":1486929348727,"v":0.44023318469535244},{"t":1486929350757,"v":0.56325122041779163},{"t":1486929352773,"v":0.51168241655066726},{"t":1486929354773,"v":0.1970438944162074},{"t":1486929356790,"v":0.92117776764611614},{"t":1486929358803,"v":0.63146299944793016},{"t":1486929360820,"v":0.38839653385262773},{"t":1486929362837,"v":0.47368467714343437},{"t":1486929364850,"v":0.978512861290254},{"t":1486929366850,"v":0.9580329083642144},{"t":1486929368850,"v":0.71375759258575622},{"t":1486929370867,"v":0.24461779009765844},{"t":1486929372883,"v":0.70231506074886541},{"t":1486929374897,"v":0.86269315977706251},{"t":1486929376897,"v":0.3612099016835959},{"t":1486929378913,"v":0.40434417613052959},{"t":1486929380913,"v":0.68680162340719331},{"t":1486929382930,"v":0.76521921146904082},{"t":1486929384947,"v":0.086219247005050653},{"t":1486929386947,"v":0.21906565000259581},{"t":1486929388947,"v":0.16301131069800412},{"t":1486929390960,"v":0.28690056050517621},{"t":1486929392977,"v":0.33273772910830457},{"t":1486929394977,"v":0.81815298312257645},{"t":1486929396993,"v":0.065500386555446488},{"t":1486929399007,"v":0.080185980107721863},{"t":1486929401023,"v":0.37971661071279861},{"t":1486929403023,"v":0.827069921804159},{"t":1486929405040,"v":0.84416983828142744},{"t":1486929407053,"v":0.24727859080176734},{"t":1486929409070,"v":0.19209116007764412},{"t":1486929411070,"v":0.069047238709892725},{"t":1486929413070,"v":0.41926630931872239},{"t":1486929415087,"v":0.49058228660867653},{"t":1486929417100,"v":0.90006486321802481},{"t":1486929419100,"v":0.4714466251765595},{"t":1486929421100,"v":0.66548399611631592},{"t":1486929423100,"v":0.868535291342314},{"t":1486929425100,"v":0.86817197821483572},{"t":1486929427117,"v":0.49625418730837023},{"t":1486929429133,"v":0.7795929735431415},{"t":1486929431147,"v":0.00082328775935959432},{"t":1486929433147,"v":0.72521743491534951},{"t":1486929435163,"v":0.8331701927041496},{"t":1486929437180,"v":0.18208765712663888},{"t":1486929439197,"v":0.6768194668352695},{"t":1486929441197,"v":0.14858563158129603},{"t":1486929443197,"v":0.7950376164145011},{"t":1486929445210,"v":0.43892554679835472},{"t":1486929447227,"v":0.44030017752214345},{"t":1486929449243,"v":0.040971959028845636},{"t":1486929451257,"v":0.31093902993525335},{"t":1486929453273,"v":0.97797562925982084},{"t":1486929455273,"v":0.5394658909828709},{"t":1486929457273,"v":0.524065450077907},{"t":1486929459290,"v":0.15333262419017621},{"t":1486929461290,"v":0.23051349130948703},{"t":1486929463307,"v":0.6935294334280907},{"t":1486929465320,"v":0.13154350786076091},{"t":1486929467320,"v":0.84099178753839421},{"t":1486929469320,"v":0.25174638873513155},{"t":1486929471337,"v":0.56132661204846879},{"t":1486929473350,"v":0.629514838862007},{"t":1486929475367,"v":0.73123427048848677},{"t":1486929477383,"v":0.76594174828657036},{"t":1486929479397,"v":0.64471035387586351},{"t":1486929481413,"v":0.825351480778936},{"t":1486929483413,"v":0.21173277414018882},{"t":1486929485430,"v":0.96262829655903781},{"t":1486929487447,"v":0.88976327650703646},{"t":1486929489447,"v":0.73886018001421361},{"t":1486929491460,"v":0.81826633206487931},{"t":1486929493477,"v":0.8970472332542051},{"t":1486929495493,"v":0.58996505969668045},{"t":1486929497493,"v":0.43947267645945431},{"t":1486929499493,"v":0.16218802293864451},{"t":1486929501507,"v":0.56168312558982669},{"t":1486929503523,"v":0.49956753640415497},{"t":1486929505540,"v":0.63606532599593757},{"t":1486929507540,"v":0.38868091972017704},{"t":1486929509557,"v":0.93160034852642581},{"t":1486929511570,"v":0.58467899429829739},{"t":1486929513570,"v":0.38814437500580418},{"t":1486929515570,"v":0.403869660759284},{"t":1486929517587,"v":0.20630663177292172},{"t":1486929519603,"v":0.8811521301423908},{"t":1486929521617,"v":0.091071609450071866},{"t":1486929523617,"v":0.87980041833585143},{"t":1486929525633,"v":0.96651683653076959},{"t":1486929527647,"v":0.74673223902784858},{"t":1486929529663,"v":0.24093313386707246},{"t":1486929531680,"v":0.97195456268822522},{"t":1486929533697,"v":0.73699178348155314},{"t":1486929535697,"v":0.027180190676441503},{"t":1486929537710,"v":0.24450779857323868},{"t":1486929539727,"v":0.21826636149467266},{"t":1486929541743,"v":0.37130844889735265},{"t":1486929543757,"v":0.99398316442686285},{"t":1486929545757,"v":0.0672284444175793},{"t":1486929547773,"v":0.53737730325077537},{"t":1486929549790,"v":0.85146798605633345},{"t":1486929551790,"v":0.93685285744110725},{"t":1486929553790,"v":0.8324093198554634},{"t":1486929555790,"v":0.54916227029131837},{"t":1486929557790,"v":0.70143999750792985},{"t":1486929559807,"v":0.22270562696396634},{"t":1486929561820,"v":0.41389179668104825},{"t":1486929563837,"v":0.38801056956314045},{"t":1486929565837,"v":0.099993214523416585},{"t":1486929567853,"v":0.36187742713926241},{"t":1486929569867,"v":0.59164949860034954},{"t":1486929571883,"v":0.7309459549053321},{"t":1486929573897,"v":0.057464107432153126},{"t":1486929575913,"v":0.74286258814058392},{"t":1486929577913,"v":0.90939143901196839},{"t":1486929579913,"v":0.667067394436834},{"t":1486929581930,"v":0.17318223704266467},{"t":1486929583947,"v":0.22564517810272294},{"t":1486929585960,"v":0.524927638715565},{"t":1486929587960,"v":0.88478961814417956},{"t":1486929589960,"v":0.55363874442579164},{"t":1486929591977,"v":0.94555106244308462},{"t":1486929593993,"v":0.2452159376094192},{"t":1486929595993,"v":0.21589605753118921},{"t":1486929598007,"v":0.648830142639964},{"t":1486929600023,"v":0.76690561732598839},{"t":1486929602040,"v":0.081274548583326181},{"t":1486929604057,"v":0.86986704257776359},{"t":1486929606070,"v":0.34545726112344177},{"t":1486929608087,"v":0.22120631496478166},{"t":1486929610087,"v":0.79087957404129183},{"t":1486929612103,"v":0.56769996116296384},{"t":1486929614117,"v":0.43233909198657566},{"t":1486929616117,"v":0.098688022745162265},{"t":1486929618117,"v":0.53721293366384359},{"t":1486929620133,"v":0.99474749108531857},{"t":1486929622150,"v":0.7522696744428341},{"t":1486929624163,"v":0.83898210471448587},{"t":1486929626163,"v":0.70242966325135425},{"t":1486929628163,"v":0.9836010048089554},{"t":1486929630163,"v":0.46726033346134255},{"t":1486929632163,"v":0.70306103988693147},{"t":1486929634163,"v":0.77980720381243485},{"t":1486929636180,"v":0.60463940939150718},{"t":1486929638197,"v":0.15508274042749906},{"t":1486929640210,"v":0.50998717896174039},{"t":1486929642210,"v":0.91449045525607209},{"t":1486929644210,"v":0.99412919534096922},{"t":1486929646227,"v":0.1177887516644731},{"t":1486929648243,"v":0.57744040413640463},{"t":1486929650257,"v":0.04508412445200799},{"t":1486929652273,"v":0.14566327079462971},{"t":1486929654290,"v":0.46905552571129777},{"t":1486929656290,"v":0.1824388262733998},{"t":1486929658307,"v":0.98373855882498373},{"t":1486929660320,"v":0.90591692361324883},{"t":1486929662337,"v":0.691636919831688},{"t":1486929664353,"v":0.61651326232427417},{"t":1486929666353,"v":0.9003321276513544},{"t":1486929668367,"v":0.93453438018194135},{"t":1486929670383,"v":0.14143107838064017},{"t":1486929672383,"v":0.54402475410328466},{"t":1486929674383,"v":0.042553308439698678},{"t":1486929676400,"v":0.87878689955863487},{"t":1486929678413,"v":0.57099785309797058},{"t":1486929680413,"v":0.023949537437385662},{"t":1486929682430,"v":0.29860686291875638},{"t":1486929684447,"v":0.95877608468699083},{"t":1486929686460,"v":0.20564965447674025},{"t":1486929688460,"v":0.91464394792664983},{"t":1486929690477,"v":0.91479771999400006},{"t":1486929692493,"v":0.3342001323281788},{"t":1486929694507,"v":0.52321551485136875},{"t":1486929696507,"v":0.54132663390660962},{"t":1486929698507,"v":0.41752928468283695},{"t":1486929700523,"v":0.85057770453886017},{"t":1486929702540,"v":0.16574385863064969},{"t":1486929704557,"v":0.640576528217912},{"t":1486929706557,"v":0.060813317103690152},{"t":1486929708570,"v":0.13884296367822352},{"t":1486929710587,"v":0.8524151620699163},{"t":1486929712587,"v":0.087145353242356963},{"t":1486929714587,"v":0.75207829091329048},{"t":1486929716603,"v":0.76801685698703714},{"t":1486929718617,"v":0.17612219051277367},{"t":1486929720633,"v":0.64521630324666213},{"t":1486929722633,"v":0.0986444354516661},{"t":1486929724633,"v":0.24990026571317589},{"t":1486929726650,"v":0.11494946392017857},{"t":1486929728663,"v":0.63129601005059477},{"t":1486929730680,"v":0.30311057125363061},{"t":1486929732680,"v":0.1357564121185599},{"t":1486929734680,"v":0.93864997706313147},{"t":1486929736697,"v":0.76789528306941279},{"t":1486929738710,"v":0.84216992642831523},{"t":1486929740727,"v":0.92323557935805789},{"t":1486929742743,"v":0.66050773144723274},{"t":1486929744757,"v":0.9010203042538},{"t":1486929746757,"v":0.033641556293536705},{"t":1486929748757,"v":0.13113320299011338},{"t":1486929750773,"v":0.21138031604298405},{"t":1486929752790,"v":0.95571437056908126},{"t":1486929754807,"v":0.788479540864229},{"t":1486929756807,"v":0.20314480373782329},{"t":1486929758820,"v":0.66264268414240457},{"t":1486929760837,"v":0.71088399212382924},{"t":1486929762853,"v":0.622447755943261},{"t":1486929764853,"v":0.92772889180468809},{"t":1486929766853,"v":0.76490954159056279},{"t":1486929768867,"v":0.13316085428612345},{"t":1486929770883,"v":0.74017306498259916},{"t":1486929772883,"v":0.051060391613776047},{"t":1486929774900,"v":0.55569994522058408},{"t":1486929776917,"v":0.76148916397313082},{"t":1486929778930,"v":0.08211921811202505},{"t":1486929780930,"v":0.054285725138283204},{"t":1486929782930,"v":0.79194646318999418},{"t":1486929784930,"v":0.27453645145266153},{"t":1486929786947,"v":0.7026647090458612},{"t":1486929788960,"v":0.92578154985130834},{"t":1486929790977,"v":0.92530510198571958},{"t":1486929792977,"v":0.048706597205580487},{"t":1486929794977,"v":0.84382662076681225},{"t":1486929796993,"v":0.57435364442614545},{"t":1486929799007,"v":0.61153337667301921},{"t":1486929801007,"v":0.77904130787544013},{"t":1486929803023,"v":0.39555015526504728},{"t":1486929805040,"v":0.755320231781956},{"t":1486929807057,"v":0.6991567074782945},{"t":1486929809057,"v":0.49429370532477912},{"t":1486929811057,"v":0.19006997309162746},{"t":1486929813070,"v":0.26472355437684969},{"t":1486929815087,"v":0.60693497192437529},{"t":1486929817103,"v":0.92968011411357676},{"t":1486929819117,"v":0.92746264763523945},{"t":1486929821133,"v":0.89670079150083515},{"t":1486929823150,"v":0.29866581237812795},{"t":1486929825167,"v":0.54893348717546719},{"t":1486929827180,"v":0.10537417284463262},{"t":1486929829197,"v":0.46523819838894448},{"t":1486929831213,"v":0.02276854730340119},{"t":1486929833227,"v":0.170915543646978},{"t":1486929835243,"v":0.48499072412261307},{"t":1486929837257,"v":0.98178860963405512},{"t":1486929839273,"v":0.89112294506799572},{"t":1486929841273,"v":0.25205017963985454},{"t":1486929843290,"v":0.58005646689797585},{"t":1486929845307,"v":0.17716081309000067},{"t":1486929847320,"v":0.68577606495738774},{"t":1486929849337,"v":0.787884201290032},{"t":1486929851353,"v":0.13128911616806366},{"t":1486929853367,"v":0.38597127999457126},{"t":1486929855383,"v":0.19835559520793875},{"t":1486929857400,"v":0.10786000644222833},{"t":1486929859417,"v":0.20582810100439383},{"t":1486929861430,"v":0.16267371883740356},{"t":1486929863447,"v":0.11188774980226893},{"t":1486929865463,"v":0.21412589643808355},{"t":1486929867477,"v":0.59161142706480407},{"t":1486929869493,"v":0.88360137626696444},{"t":1486929871507,"v":0.31533383685878191},{"t":1486929873523,"v":0.867127524161305},{"t":1486929875540,"v":0.22857218432639362},{"t":1486929877557,"v":0.27061583626578367},{"t":1486929879570,"v":0.943090881194496},{"t":1486929881587,"v":0.47544951060574947},{"t":1486929883603,"v":0.44412541968940078},{"t":1486929885603,"v":0.62601983110700721},{"t":1486929887617,"v":0.83402651633789138},{"t":1486929889633,"v":0.18541842661118993},{"t":1486929891650,"v":0.75561991276015528},{"t":1486929893667,"v":0.243012976014527},{"t":1486929895680,"v":0.1691622786080289},{"t":1486929897697,"v":0.23742651065691678},{"t":1486929899713,"v":0.90301300254790717},{"t":1486929901727,"v":0.75438955833874155},{"t":1486929903743,"v":0.56371587308296744},{"t":1486929905760,"v":0.86203801113275713},{"t":1486929907773,"v":0.68323069935814973},{"t":1486929909790,"v":0.35948319703316467},{"t":1486929911790,"v":0.19898484097746427},{"t":1486929913807,"v":0.2183893421750466},{"t":1486929915820,"v":0.06954416682456814},{"t":1486929917837,"v":0.9112725061882625},{"t":1486929919853,"v":0.36300458915671546},{"t":1486929921867,"v":0.80409869309705617},{"t":1486929923883,"v":0.066367959168910959},{"t":1486929925900,"v":0.49907496548214692},{"t":1486929927917,"v":0.7238520131091829},{"t":1486929929930,"v":0.76478892879783589},{"t":1486929931947,"v":0.78481304169856614},{"t":1486929933963,"v":0.084539915940044411},{"t":1486929935977,"v":0.95732206011066312},{"t":1486929937993,"v":0.22177279657766819},{"t":1486929940010,"v":0.14990436153016257},{"t":1486929942023,"v":0.15564102314209613},{"t":1486929944040,"v":0.94234335932058444},{"t":1486929946057,"v":0.2143748878568294},{"t":1486929948070,"v":0.038697728439559105},{"t":1486929950087,"v":0.41567343446224619},{"t":1486929952103,"v":0.80792475995045376},{"t":1486929954117,"v":0.95403663579096865},{"t":1486929956133,"v":0.34313429675210932},{"t":1486929958150,"v":0.50035763834619784},{"t":1486929960167,"v":0.032264288529876756},{"t":1486929962180,"v":0.88827614015353662},{"t":1486929964197,"v":0.21680900138654233},{"t":1486929966213,"v":0.960929084551022},{"t":1486929968227,"v":0.20484700389432114},{"t":1486929970243,"v":0.45143854266565225},{"t":1486929972260,"v":0.59895784575443611},{"t":1486929974273,"v":0.24984973866951174},{"t":1486929976273,"v":0.53089519707993382},{"t":1486929978290,"v":0.23212823003163943},{"t":1486929980307,"v":0.68461653528950017},{"t":1486929982320,"v":0.0969444946837353},{"t":1486929984337,"v":0.79758335733673691},{"t":1486929986353,"v":0.31729967813813115},{"t":1486929988367,"v":0.90761124710906815},{"t":1486929990383,"v":0.13899218809743979},{"t":1486929992400,"v":0.4090815514368385},{"t":1486929994417,"v":0.94505045420725386},{"t":1486929996430,"v":0.90216781799782431},{"t":1486929998447,"v":0.069237587540055434},{"t":1486930000463,"v":0.40060538491262376},{"t":1486930002477,"v":0.67107999682011088},{"t":1486930004493,"v":0.28569091590386392},{"t":1486930006493,"v":0.94738948203036066},{"t":1486930008510,"v":0.087522149126754212},{"t":1486930010523,"v":0.747371979405811},{"t":1486930012523,"v":0.81204619901815722},{"t":1486930014540,"v":0.34934098522613805},{"t":1486930016557,"v":0.823340282693198},{"t":1486930018570,"v":0.26755726489590353},{"t":1486930020587,"v":0.55155843708271091},{"t":1486930022603,"v":0.24494820518649565},{"t":1486930024617,"v":0.87525504542293731},{"t":1486930026633,"v":0.56918652847837026},{"t":1486930028650,"v":0.87900821765838577},{"t":1486930030667,"v":0.47472844900317884},{"t":1486930032680,"v":0.58728969171051393},{"t":1486930034697,"v":0.105438874617889},{"t":1486930036697,"v":0.29422796158782577},{"t":1486930038713,"v":0.2724134704435307},{"t":1486930040727,"v":0.16583108304339977},{"t":1486930042743,"v":0.53496330302905448},{"t":1486930044760,"v":0.55364471886011057},{"t":1486930046773,"v":0.7251938300790236},{"t":1486930048790,"v":0.53715626128816807},{"t":1486930050790,"v":0.052959866846427256},{"t":1486930052807,"v":0.35805766580535919},{"t":1486930054820,"v":0.62504368118245324},{"t":1486930056837,"v":0.30676364074776119},{"t":1486930058853,"v":0.89970554034211936},{"t":1486930060867,"v":0.0065918830254077364},{"t":1486930062867,"v":0.8628743057431999},{"t":1486930064883,"v":0.051868817793144291},{"t":1486930066900,"v":0.27389670921205389},{"t":1486930068917,"v":0.0997522534335741},{"t":1486930070917,"v":0.3611842917097659},{"t":1486930072917,"v":0.60258522424967276},{"t":1486930074930,"v":0.26941951935618164},{"t":1486930076947,"v":0.87340693542426773},{"t":1486930078963,"v":0.45747502448851013},{"t":1486930080963,"v":0.63939234364749509},{"t":1486930082977,"v":0.24961686052829812},{"t":1486930084993,"v":0.42650945597631368},{"t":1486930087010,"v":0.26333793218403029},{"t":1486930089027,"v":0.68056979294892861},{"t":1486930091040,"v":0.43966833010300449},{"t":1486930093040,"v":0.22168944926079803},{"t":1486930095057,"v":0.22839682885836662},{"t":1486930097057,"v":0.43829146047974538},{"t":1486930099070,"v":0.43288279810588937},{"t":1486930101087,"v":0.55170249638692592},{"t":1486930103087,"v":0.30364267681894946},{"t":1486930105103,"v":0.650822492619428},{"t":1486930107117,"v":0.6297543475542936},{"t":1486930109133,"v":0.90340650449665572},{"t":1486930111150,"v":0.86564208188356928},{"t":1486930113167,"v":0.11743527796000022},{"t":1486930115180,"v":0.56049708582484026},{"t":1486930117197,"v":0.41023322074219271},{"t":1486930119213,"v":0.034562282280326956},{"t":1486930121227,"v":0.38931431360045182},{"t":1486930123243,"v":0.18700251783570393},{"t":1486930125260,"v":0.042577344478376834},{"t":1486930127277,"v":0.92363474235107879},{"t":1486930129290,"v":0.26096538187049578},{"t":1486930131307,"v":0.688684131339511},{"t":1486930133320,"v":0.19307938739335137},{"t":1486930135337,"v":0.60135833621088342},{"t":1486930137353,"v":0.46943427504479618},{"t":1486930139367,"v":0.51782392594861981},{"t":1486930141383,"v":0.87214322475350614},{"t":1486930143400,"v":0.31787017235433224},{"t":1486930145417,"v":0.23203193919362125},{"t":1486930147430,"v":0.83675293709931564},{"t":1486930149447,"v":0.63302112679603562},{"t":1486930151463,"v":0.91621422251510165},{"t":1486930153477,"v":0.10845384705274079},{"t":1486930155493,"v":0.29030678667608034},{"t":1486930157510,"v":0.044624037130095079},{"t":1486930159527,"v":0.097487931185163523},{"t":1486930161540,"v":0.83127041758562925},{"t":1486930163557,"v":0.1296608369469926},{"t":1486930165573,"v":0.18675222070270786},{"t":1486930167587,"v":0.87388084264187182},{"t":1486930169603,"v":0.34800304395519338},{"t":1486930171617,"v":0.70294920620645829},{"t":1486930173633,"v":0.21205181312377183},{"t":1486930175650,"v":0.42211447023885068},{"t":1486930177667,"v":0.37049020471539823},{"t":1486930179680,"v":0.23411017155000483},{"t":1486930181697,"v":0.24374901374976571},{"t":1486930183713,"v":0.042088138424832437},{"t":1486930185713,"v":0.859186298613989},{"t":1486930187727,"v":0.83884465314394074},{"t":1486930189743,"v":0.068160710888058279},{"t":1486930191760,"v":0.45238982581179116},{"t":1486930193777,"v":0.2070395160499213},{"t":1486930195790,"v":0.50287471362523484},{"t":1486930197807,"v":0.0023725503135344711},{"t":1486930199823,"v":0.9918856616094176},{"t":1486930201837,"v":0.24658894270965315},{"t":1486930203853,"v":0.62033111304991462},{"t":1486930205867,"v":0.75896255381357047},{"t":1486930207883,"v":0.92046753453112562},{"t":1486930209900,"v":0.56073957335238322},{"t":1486930211900,"v":0.23383232403259366},{"t":1486930213917,"v":0.071610737625328241},{"t":1486930215930,"v":0.8140695555201124},{"t":1486930217947,"v":0.996733220758258},{"t":1486930219963,"v":0.98719228198155407},{"t":1486930221977,"v":0.75718823483082853},{"t":1486930223993,"v":0.82712849128391985},{"t":1486930226010,"v":0.51587304869474515},{"t":1486930228027,"v":0.31274528955702918},{"t":1486930230040,"v":0.20329186469469773},{"t":1486930232057,"v":0.25965347665345923},{"t":1486930234073,"v":0.00025029713299604931},{"t":1486930236087,"v":0.16869650183650503},{"t":1486930238103,"v":0.57563169839588535},{"t":1486930240120,"v":0.55801617566403749},{"t":1486930242133,"v":0.47663231821573915},{"t":1486930244150,"v":0.77096491715450066},{"t":1486930246167,"v":0.23086813149548516},{"t":1486930248180,"v":0.23532410349479135},{"t":1486930250197,"v":0.2740749121988541},{"t":1486930252213,"v":0.83005508632867364},{"t":1486930254227,"v":0.45868387374034331},{"t":1486930256243,"v":0.39318728604968045},{"t":1486930258260,"v":0.76859222621125733},{"t":1486930260260,"v":0.18063130098424446},{"t":1486930262277,"v":0.70917470646518033},{"t":1486930264290,"v":0.60557913342750591},{"t":1486930266307,"v":0.28793423636254584},{"t":1486930268323,"v":0.052738375520677477},{"t":1486930270337,"v":0.85089898847551038},{"t":1486930272353,"v":0.21093930453571458},{"t":1486930274370,"v":0.37069828313342218},{"t":1486930276370,"v":0.2662846861715823},{"t":1486930278383,"v":0.31314126928948854},{"t":1486930280400,"v":0.11417071992259972},{"t":1486930282417,"v":0.63133846858113},{"t":1486930284430,"v":0.39798225760365941},{"t":1486930286447,"v":0.42538124948059269},{"t":1486930288463,"v":0.38329792273384422},{"t":1486930290477,"v":0.47692193671917632},{"t":1486930292477,"v":0.4166205224658458},{"t":1486930294493,"v":0.52621508973008724},{"t":1486930296510,"v":0.5464410090569598},{"t":1486930298527,"v":0.63555278844924312},{"t":1486930300540,"v":0.808507234234599},{"t":1486930302557,"v":0.45213952867879509},{"t":1486930304573,"v":0.038343014213416265},{"t":1486930306587,"v":0.92724301522934949},{"t":1486930308603,"v":0.4443563746494969},{"t":1486930310620,"v":0.51525334339367845},{"t":1486930312633,"v":0.47562402555515249},{"t":1486930314650,"v":0.38946298155442949},{"t":1486930316667,"v":0.52363845031877909},{"t":1486930318680,"v":0.64639262233227146},{"t":1486930320697,"v":0.73068448702370958},{"t":1486930322713,"v":0.77514845029225032},{"t":1486930324727,"v":0.67842345157564776},{"t":1486930326743,"v":0.045477329308855036},{"t":1486930328760,"v":0.81610191977401358},{"t":1486930330777,"v":0.27801757551637363},{"t":1486930332790,"v":0.15160910140332259},{"t":1486930334807,"v":0.53919425492137407},{"t":1486930336823,"v":0.4631346731740677},{"t":1486930338837,"v":0.46184630108151881},{"t":1486930340853,"v":0.9923525601589831},{"t":1486930342853,"v":0.888955193520037},{"t":1486930344870,"v":0.73396561096141377},{"t":1486930346883,"v":0.85555523254701649},{"t":1486930348900,"v":0.46146097847328565},{"t":1486930350917,"v":0.92667770708290753},{"t":1486930352930,"v":0.078650060612079714},{"t":1486930354947,"v":0.345583667673908},{"t":1486930356963,"v":0.84757020876164091},{"t":1486930358977,"v":0.758402166775615},{"t":1486930360993,"v":0.85745438973300825},{"t":1486930362993,"v":0.30383999659858646},{"t":1486930365010,"v":0.91224286468338356},{"t":1486930367027,"v":0.75763449760043733},{"t":1486930369040,"v":0.96008499197665831},{"t":1486930371057,"v":0.72849177230544937},{"t":1486930373073,"v":0.67083169225176409},{"t":1486930375087,"v":0.67833611819815642},{"t":1486930377103,"v":0.84357786171304894},{"t":1486930379120,"v":0.537485032126999},{"t":1486930381120,"v":0.37527496292035795},{"t":1486930383133,"v":0.821476322981285},{"t":1486930385150,"v":0.847059832814643},{"t":1486930387167,"v":0.61989206383931084},{"t":1486930389180,"v":0.582456782265779},{"t":1486930391197,"v":0.33902226963034937},{"t":1486930393213,"v":0.9529150170054822},{"t":1486930395227,"v":0.3525049282948044},{"t":1486930397243,"v":0.60927932970657916},{"t":1486930399260,"v":0.10528034721747057},{"t":1486930401277,"v":0.32531283531585375},{"t":1486930403277,"v":0.87742626754447184},{"t":1486930405290,"v":0.063080416556019536},{"t":1486930407307,"v":0.084594707975440983},{"t":1486930409323,"v":0.64320022829025991},{"t":1486930411337,"v":0.919552040714562},{"t":1486930413353,"v":0.71817391771738137},{"t":1486930415370,"v":0.18278778166639981},{"t":1486930417387,"v":0.46578203675606383},{"t":1486930419400,"v":0.51767866756658942},{"t":1486930421400,"v":0.43660328278159877},{"t":1486930423400,"v":0.13004035788124443},{"t":1486930425417,"v":0.54189277279278858},{"t":1486930427430,"v":0.76523628354316409},{"t":1486930429447,"v":0.78893823259926321},{"t":1486930431463,"v":0.42684449042512312},{"t":1486930433477,"v":0.86290558560886677},{"t":1486930435493,"v":0.92078895397521043},{"t":1486930437510,"v":0.085392337332196686},{"t":1486930439527,"v":0.087610147468564173},{"t":1486930441540,"v":0.60718588326460954},{"t":1486930443557,"v":0.4732729832051662},{"t":1486930445573,"v":0.69561639320832513},{"t":1486930447587,"v":0.92564964104706871},{"t":1486930449603,"v":0.08657133816116086},{"t":1486930451620,"v":0.17087623717769806},{"t":1486930453637,"v":0.041895360705394},{"t":1486930455650,"v":0.11407354712210295},{"t":1486930457667,"v":0.27309845028123747},{"t":1486930459680,"v":0.1224387088429363},{"t":1486930461697,"v":0.97376269007742533},{"t":1486930463713,"v":0.72614513231727529},{"t":1486930465727,"v":0.73630433796732886},{"t":1486930467743,"v":0.74228986154417032},{"t":1486930469760,"v":0.43308933145976131},{"t":1486930471777,"v":0.98002812218853652},{"t":1486930473790,"v":0.2407595800425669},{"t":1486930475807,"v":0.82764815670794256},{"t":1486930477823,"v":0.11443426931017743},{"t":1486930479837,"v":0.040532951262096384},{"t":1486930481853,"v":0.010317854588068023},{"t":1486930483870,"v":0.48804391058536428},{"t":1486930485887,"v":0.21255408144209259},{"t":1486930487900,"v":0.32589919414645957},{"t":1486930489917,"v":0.10088174934540026},{"t":1486930491917,"v":0.24523460503911348},{"t":1486930493933,"v":0.27958355018849651},{"t":1486930495947,"v":0.081823549271479043},{"t":1486930497963,"v":0.83095383124004762},{"t":1486930499963,"v":0.15561229184065586},{"t":1486930501977,"v":0.47611668402148255},{"t":1486930503993,"v":0.032126063030271823},{"t":1486930506010,"v":0.2671125909626077},{"t":1486930508027,"v":0.521669182238015},{"t":1486930510040,"v":0.498094463952861},{"t":1486930512057,"v":0.85203985211068756},{"t":1486930514073,"v":0.1818098743361467},{"t":1486930516073,"v":0.13743077550895083},{"t":1486930518087,"v":0.99802336981428008},{"t":1486930520103,"v":0.4723239911125619},{"t":1486930522120,"v":0.877656680009168},{"t":1486930524137,"v":0.60410037059527844},{"t":1486930526150,"v":0.90968933138516239},{"t":1486930528167,"v":0.34334332791312755},{"t":1486930530183,"v":0.54391597748916409},{"t":1486930532183,"v":0.71045815046432337},{"t":1486930534197,"v":0.39373601991391555},{"t":1486930536213,"v":0.79960291124861826},{"t":1486930538230,"v":0.33214695208340278},{"t":1486930540243,"v":0.80891011041072669},{"t":1486930542260,"v":0.18608491038255623},{"t":1486930544277,"v":0.035257428900924245},{"t":1486930546290,"v":0.806354684665033},{"t":1486930548307,"v":0.0448593860701003},{"t":1486930550323,"v":0.077292292880496147},{"t":1486930552323,"v":0.11914197267924527},{"t":1486930554337,"v":0.26071890176307361},{"t":1486930556353,"v":0.36971719906186556},{"t":1486930558370,"v":0.82476789170166842},{"t":1486930560370,"v":0.84133673312204738},{"t":1486930562370,"v":0.8912926869892015},{"t":1486930564387,"v":0.960071811433915},{"t":1486930566400,"v":0.28311971588205531},{"t":1486930568417,"v":0.11748615844058159},{"t":1486930570433,"v":0.64632202482145373},{"t":1486930572447,"v":0.94163662704715345},{"t":1486930574463,"v":0.45903254135466764},{"t":1486930576463,"v":0.21463515572931391},{"t":1486930578480,"v":0.24419539759130934},{"t":1486930580493,"v":0.58104947934907369},{"t":1486930582493,"v":0.79821824785238982},{"t":1486930584510,"v":0.10332880453361608},{"t":1486930586527,"v":0.82962478689366248},{"t":1486930588540,"v":0.64211027819761557},{"t":1486930590557,"v":0.16287627125292842},{"t":1486930592573,"v":0.40621748399278962},{"t":1486930594587,"v":0.578354579200202},{"t":1486930596603,"v":0.869210753528965},{"t":1486930598620,"v":0.78198321665729542},{"t":1486930600637,"v":0.39042359888107686},{"t":1486930602650,"v":0.85149858512519794},{"t":1486930604667,"v":0.47998063893987825},{"t":1486930606667,"v":0.74967659718807633},{"t":1486930608683,"v":0.022043720829320941},{"t":1486930610697,"v":0.96952738145809969},{"t":1486930612713,"v":0.44085925512055829},{"t":1486930614730,"v":0.22577137836523883},{"t":1486930616743,"v":0.22225320489250738},{"t":1486930618760,"v":0.44437688935751885},{"t":1486930620777,"v":0.37895249127361574},{"t":1486930622790,"v":0.591320950347614},{"t":1486930624807,"v":0.81209267527428119},{"t":1486930626823,"v":0.31266288380728235},{"t":1486930628837,"v":0.15668663669223276},{"t":1486930630853,"v":0.58103130412336035},{"t":1486930632870,"v":0.917584868575253},{"t":1486930634887,"v":0.32098065471322307},{"t":1486930636900,"v":0.79220317294458076},{"t":1486930638917,"v":0.69702130309167376},{"t":1486930640933,"v":0.60227935044201064},{"t":1486930642933,"v":0.25142560910965578},{"t":1486930644947,"v":0.17910086418460164},{"t":1486930646963,"v":0.55540751365730889},{"t":1486930648980,"v":0.751097472734329},{"t":1486930650993,"v":0.010691862558336864},{"t":1486930653010,"v":0.082756105848940137},{"t":1486930655027,"v":0.20563264200726181},{"t":1486930657040,"v":0.16424440646741745},{"t":1486930659057,"v":0.88198311481717184},{"t":1486930661057,"v":0.67107480888770654},{"t":1486930663057,"v":0.54078739347904337},{"t":1486930665073,"v":0.39150814823410851},{"t":1486930667087,"v":0.58773398240457009},{"t":1486930669103,"v":0.43434429282059162},{"t":1486930671120,"v":0.98983814799684944},{"t":1486930673137,"v":0.41131204804932331},{"t":1486930675150,"v":0.21039521424583868},{"t":1486930677167,"v":0.26107599505273438},{"t":1486930679183,"v":0.14795877698248194},{"t":1486930681197,"v":0.20546276970089541},{"t":1486930683213,"v":0.71586524868191459},{"t":1486930685230,"v":0.23677933646216026},{"t":1486930687243,"v":0.77025826637179506},{"t":1486930689260,"v":0.86524290631769363},{"t":1486930691277,"v":0.98972852900145969},{"t":1486930693290,"v":0.98612557257810862},{"t":1486930695307,"v":0.79066592072633368},{"t":1486930697323,"v":0.67293815020142966},{"t":1486930699337,"v":0.0610789740742552},{"t":1486930701337,"v":0.24529140267767544},{"t":1486930703337,"v":0.085236829279566564},{"t":1486930705353,"v":0.78615140625562119},{"t":1486930707370,"v":0.17218945043729128},{"t":1486930709387,"v":0.17970386621528486},{"t":1486930711400,"v":0.13899798977142105},{"t":1486930713417,"v":0.67239772094059624},{"t":1486930715433,"v":0.92457312528256941},{"t":1486930717447,"v":0.99857912445374719},{"t":1486930719463,"v":0.011351858270984077},{"t":1486930721463,"v":0.88677127560915947},{"t":1486930723480,"v":0.23522661311329651},{"t":1486930725497,"v":0.061526971897821393},{"t":1486930727510,"v":0.34027009007533549},{"t":1486930729527,"v":0.7733020804698123},{"t":1486930731540,"v":0.83816509779457238},{"t":1486930733557,"v":0.19981280211350547},{"t":1486930735573,"v":0.22435869286971105},{"t":1486930737587,"v":0.87831859098669074},{"t":1486930739603,"v":0.1668484886953833},{"t":1486930741620,"v":0.16971925607403707},{"t":1486930743637,"v":0.70718965432941427},{"t":1486930745650,"v":0.059904659660488677},{"t":1486930747667,"v":0.64424439596209881},{"t":1486930749683,"v":0.49155853339077837},{"t":1486930751697,"v":0.88641410176009594},{"t":1486930753713,"v":0.014646272647495509},{"t":1486930755713,"v":0.40884259781280652},{"t":1486930757730,"v":0.69016460733961527},{"t":1486930759747,"v":0.76136894373286934},{"t":1486930761760,"v":0.024566289980228195},{"t":1486930763760,"v":0.29209018512260643},{"t":1486930765777,"v":0.53269449180583217},{"t":1486930767790,"v":0.10316543239316224},{"t":1486930769807,"v":0.63669171213949649},{"t":1486930771823,"v":0.58583797960814},{"t":1486930773837,"v":0.75463598722342218},{"t":1486930775853,"v":0.21931869779681726},{"t":1486930777870,"v":0.40803011618928525},{"t":1486930779887,"v":0.29534630304917053},{"t":1486930781887,"v":0.31744042705625314},{"t":1486930783900,"v":0.4867389227667539},{"t":1486930785900,"v":0.21181608979209143},{"t":1486930787917,"v":0.24972413678175032},{"t":1486930789933,"v":0.26118750137332247},{"t":1486930791933,"v":0.97023615658759887},{"t":1486930793947,"v":0.65433827678409329},{"t":1486930795963,"v":0.89650924638682472},{"t":1486930797980,"v":0.99695618590198276},{"t":1486930799997,"v":0.0270778085231212},{"t":1486930802010,"v":0.78991572688795431},{"t":1486930804027,"v":0.76176687970839763},{"t":1486930806043,"v":0.91234732973964294},{"t":1486930808057,"v":0.5060896615060464},{"t":1486930810073,"v":0.89135971800021818},{"t":1486930812087,"v":0.53810174834826108},{"t":1486930814103,"v":0.025332169619077895},{"t":1486930816120,"v":0.1419070102935224},{"t":1486930818137,"v":0.68063091704651291},{"t":1486930820150,"v":0.29328976445518889},{"t":1486930822167,"v":0.12435171712392555},{"t":1486930824183,"v":0.26355512312778978},{"t":1486930826197,"v":0.23440851794295409},{"t":1486930828213,"v":0.23721018072087791},{"t":1486930830230,"v":0.98678556829075592},{"t":1486930832247,"v":0.594681090486553},{"t":1486930834260,"v":0.70253212130746434},{"t":1486930836277,"v":0.95836153950465919},{"t":1486930838293,"v":0.70357837793583911},{"t":1486930840307,"v":0.18746410086167237},{"t":1486930842307,"v":0.083529110571150256},{"t":1486930844323,"v":0.98049410431668815},{"t":1486930846323,"v":0.8163285766804258},{"t":1486930848337,"v":0.58297228793752021},{"t":1486930850353,"v":0.84940806163913019},{"t":1486930852370,"v":0.68298033330728314},{"t":1486930854387,"v":0.4953735645373229},{"t":1486930856400,"v":0.81018052287873832},{"t":1486930858417,"v":0.38305689458877634},{"t":1486930860433,"v":0.5213223768031795},{"t":1486930862447,"v":0.23207582497600271},{"t":1486930864463,"v":0.11813702626067075},{"t":1486930866480,"v":0.41188641191082376},{"t":1486930868497,"v":0.66308679881649413},{"t":1486930870510,"v":0.971453216844915},{"t":1486930872527,"v":0.26279941027183057},{"t":1486930874543,"v":0.37974285538296348},{"t":1486930876557,"v":0.026604830299785748},{"t":1486930878573,"v":0.2118057143929441},{"t":1486930880603,"v":0.09858996379123533},{"t":1486930882603,"v":0.56050580998906208},{"t":1486930884620,"v":0.6127289769298998},{"t":1486930886637,"v":0.53868778075030432},{"t":1486930888650,"v":0.11474035173409634},{"t":1486930890650,"v":0.170994585925245},{"t":1486930892650,"v":0.0538853039284634},{"t":1486930894667,"v":0.25233040482379981},{"t":1486930896683,"v":0.97460590907121347},{"t":1486930898697,"v":0.26293856849099445},{"t":1486930900713,"v":0.66650641088676943},{"t":1486930902730,"v":0.26770403528013453},{"t":1486930904747,"v":0.6959767372794341},{"t":1486930906760,"v":0.1929308684509857},{"t":1486930908777,"v":0.80949208504031045},{"t":1486930910793,"v":0.94354869795197094},{"t":1486930912807,"v":0.809421622571266},{"t":1486930914823,"v":0.94543830302797183},{"t":1486930916840,"v":0.32937504180212274},{"t":1486930918853,"v":0.65668159986691621},{"t":1486930920870,"v":0.208379384692935},{"t":1486930922887,"v":0.042728183810938236},{"t":1486930924900,"v":0.21515164674033954},{"t":1486930926917,"v":0.758850115704746},{"t":1486930928933,"v":0.15930854024333346},{"t":1486930930947,"v":0.061213939479186172},{"t":1486930932963,"v":0.006214690863254802},{"t":1486930934980,"v":0.851668711216966},{"t":1486930936997,"v":0.57132171912646},{"t":1486930939010,"v":0.26575696387596287},{"t":1486930941027,"v":0.7239861580189253},{"t":1486930943027,"v":0.21493823510358959},{"t":1486930945043,"v":0.67592729100767868},{"t":1486930947057,"v":0.746555825111715},{"t":1486930949073,"v":0.60498841414460369},{"t":1486930951073,"v":0.62695829087261035},{"t":1486930953090,"v":0.47080013364125051},{"t":1486930955103,"v":0.44180632356638383},{"t":1486930957120,"v":0.70158822494632944},{"t":1486930959137,"v":0.41197770201227518},{"t":1486930961150,"v":0.79552275771066672},{"t":1486930963150,"v":0.43064992848348332},{"t":1486930965167,"v":0.52076765546610937},{"t":1486930967167,"v":0.54724195438774392},{"t":1486930969183,"v":0.716550483702007},{"t":1486930971197,"v":0.25361834152304491},{"t":1486930973197,"v":0.53609908769656867},{"t":1486930975213,"v":0.92520615780968507},{"t":1486930977230,"v":0.60239432687051331},{"t":1486930979247,"v":0.71953810086452319},{"t":1486930981260,"v":0.16203159427364897},{"t":1486930983277,"v":0.3173611072438588},{"t":1486930985293,"v":0.050367813580840741},{"t":1486930987307,"v":0.36992323043286951},{"t":1486930989323,"v":0.0034263297000091198},{"t":1486930991340,"v":0.0558617799802971},{"t":1486930993353,"v":0.34535416324872253},{"t":1486930995370,"v":0.85387886122515377},{"t":1486930997387,"v":0.37937924050697092},{"t":1486930999400,"v":0.053526412254910179},{"t":1486931001400,"v":0.1647798950619902},{"t":1486931003400,"v":0.20221659271149736},{"t":1486931005417,"v":0.68100868569733974},{"t":1486931007433,"v":0.70884894519525066},{"t":1486931009447,"v":0.5389524104720691},{"t":1486931011463,"v":0.45156817578317976},{"t":1486931013480,"v":0.591776744272456},{"t":1486931015497,"v":0.94942091216771907},{"t":1486931017510,"v":0.58794245430638192},{"t":1486931019527,"v":0.18253379416770013},{"t":1486931021527,"v":0.47274856431072043},{"t":1486931023527,"v":0.36761529900488227},{"t":1486931025543,"v":0.2438500780816423},{"t":1486931027557,"v":0.9173973397898475},{"t":1486931029573,"v":0.86115884215624949},{"t":1486931031590,"v":0.77772945620945166},{"t":1486931033603,"v":0.52196052834482887},{"t":1486931035620,"v":0.66790969235259556},{"t":1486931037637,"v":0.042299632002739063},{"t":1486931039650,"v":0.90569019872028855},{"t":1486931041667,"v":0.52511485178261752},{"t":1486931043667,"v":0.08100853305356974},{"t":1486931045683,"v":0.24927438434645272},{"t":1486931047697,"v":0.85178361826193683},{"t":1486931049713,"v":0.1037253696023139},{"t":1486931051730,"v":0.4066250507750665},{"t":1486931053747,"v":0.16457042152274887},{"t":1486931055760,"v":0.30600406057480911},{"t":1486931057777,"v":0.74312949541170592},{"t":1486931059793,"v":0.54912663416430663},{"t":1486931061807,"v":0.28160412762388781},{"t":1486931063823,"v":0.61692127241609673},{"t":1486931065840,"v":0.062427083059412934},{"t":1486931067857,"v":0.64806181269141927},{"t":1486931069870,"v":0.247197806950285}].map(el => ({
        'date': el.t,
        'price': el.v
    }))

    data.forEach(d => {
        // d.date = parseDate(d.date)
        d.price = +d.price
    })

    mainXScale.domain(d3.extent(data, function (d) {
        return d.date
    }));
    mainYScale.domain([0, d3.max(data, function (d) {
        return d.price
    })]);

    subXScale.domain(mainXScale.domain());
    subYScale.domain(mainYScale.domain());

    main.append("g")
        .classed("x axis", true)
        .attr("transform", "translate(0, " + mainHeight + ")")
        .call(mainXAxis);
    main.append("g")
        .classed("y axis", true)
        .attr("transform", "translate(0, 0)")
        .call(mainYAxis);

    main.append('path')
        .datum(data)
        .classed('area', true)
        .attr('d', mainArea);

    sub.append("g")
        .classed("x axis", true)
        .attr("transform", "translate(0, " + subHeight + ")")
        .call(subXAxis);
    sub.append("g")
        .classed("y axis", true)
        .attr("transform", "translate(0, 0)")
        .call(subYAxis);

    sub.append('path')
        .datum(data)
        .classed('area', true)
        .attr('d', subArea);

    sub.append("g")
        .classed("x brush", true)
        .call(brush)
        .selectAll("rect")
        .attr("y", -6)
        .attr("height", subHeight + 7);

    d3.select('#reset').on('click', function () {
        mainXScale.domain(subXScale.domain());
        main.select('.area').transition().attr('d', mainArea);
        main.select('.x.axis').transition().call(mainXAxis);
        sub.select('rect.extent').transition().attr('width', 0);
    })


    function brushed() {
        mainXScale.domain(brush.empty() ? subXScale.domain() : brush.extent());
        main.select('.area').attr('d', mainArea);
        main.select('.x.axis').call(mainXAxis);
    }
}

function getChartWithColorZones(context) {
    const randomFromInterval = (min, max) => (Math.random() * (max - min + 1) + min).toFixed(2),
        colorChartDataGenerator = () => {
            let parseDate = d3.time.format("%d-%b-%y").parse,
                startDate = parseDate('1-May-12')

            return [...Array(100)].map((el, i) => ({
                'date': startDate.setDate(startDate.getDate() + 1),
                'close': +randomFromInterval(100, 1000)
            }))
        }

    var margin = { top: 20, right: 20, bottom: 30, left: 50 },
        width = 1000 - margin.left - margin.right,
        height = 250 - margin.top - margin.bottom;

    var parseDate = d3.time.format("%d-%b-%y").parse;

    var x = d3.time.scale()
        .range([0, width]);

    var y = d3.scale.linear()
        .range([height, 0]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left");

    var area = d3.svg.area()
        .x(function (d) { return x(d.date); })
        .y0(height)
        .y1(function (d) { return y(d.close); });

    var svg = d3.select(context.refs.chartWithColorZones)
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


    function renderChart(data) {
        console.log('data: ', data)
        data.forEach(function (d) {
            d.date = parseDate(d.date);
            d.close = +d.close;
        });

        x.domain(d3.extent(data, function (d) { return d.date; }));
        y.domain([0, d3.max(data, function (d) { return d.close; })]);

        var bucket = [];
        var prev = undefined;
        var datanew = [];
        data.forEach(function (d) {
            if (d.close > 150) {
                if (prev && prev.close < 150) {
                    datanew.push(bucket);
                    bucket = [];
                }
                bucket.push(d);
            } else {
                if (prev && prev.close > 150) {
                    datanew.push(bucket);
                    bucket = [];
                }
                bucket.push(d);
            }
            prev = d;
        });
        datanew.push(bucket); //datanew will hold the chunk of data with close > 150.

        datanew.forEach(function (d) {//iterate through the chunks
            console.log(d)
            let c
            if (d[0].close > 150)
                c = "red";//less than 150 so make it red as this chunk is for less than 150
            else
                c = "blue";//greater than 150 so make it blue as this chunk is for greater than 150
            svg.append("path")
                .datum(d)
                .attr("class", "area")
                .attr("stroke", c)//color selected above
                .style("fill", c)
                .attr("d", area);
        });


        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
            .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", ".71em")
            .style("text-anchor", "end")
            .text("Price ($)");
    }

    // setInterval(() => {
    //     let d = colorChartDataGenerator()
    //     console.log('setIntervalData: ', d)
    //     renderChart(d)
    // }, 3000)

    d3.tsv("https://gist.githubusercontent.com/cyrilcherian/6baf8967e3fceaa4fec1/raw/02ab25f4b7956b86be41523932da434529377fdb/data.tsv", function (error, data) {
        renderChart(data)
    });
}

function getChartCsv(context) {
    const h = 200,
        w = 1000,
        generateLineData = () => {
            const genRandomNum = () => Math.round(Math.random() * 30)
            return [...Array(genRandomNum())].map((el, i) => ({
                week: i * 10,
                sales: genRandomNum()
            }))
        }


    const svglinearChart = d3.select(context.refs.chartCsv)
        .attr('width', w)
        .attr('height', h)

    svglinearChart.append('text')
        .text('Loading ...')
        .attrs({
            x: w / 2,
            y: h / 2
        })

    Papa.parse("https://private-0c520c-csvtest1.apiary-mock.com/csv-data", {
        download: true,
        header: true,
        complete: function (results) {
            svglinearChart.selectAll('text').remove()
            drawLineChart(results.data)

            console.log('Min value: ', d3.min(results.data, d => +d.sales))
            console.log('Max value: ', d3.max(results.data, d => +d.sales))
            console.log('CSV to JSON: ', results.data)
        }
    });

    function drawLineChart(data) {
        const offset = 5
        const xScale = d3.scale.linear()
            .domain([
                d3.min(data, d => d.week - offset),
                d3.max(data, d => +d.week + offset)
            ])
            .range([0, w]),
            yScale = d3.scale.linear()
                .domain([
                    0, d3.max(data, d => +d.sales + offset)
                ])
                .range([h - offset, offset]),
            yAxisGen = d3.svg.axis().scale(yScale).orient('left'),
            xAxisGen = d3.svg.axis().scale(xScale).orient('bottom')

        const lineFun = d3.svg.line()
            .x(d => xScale(d.week) + 20)
            .y(d => yScale(d.sales) - 15)
            .interpolate('linear');

        svglinearChart.append('path')
            .attrs({
                'd': lineFun(data),
                'stroke': 'grey',
                'stroke-width': 2,
                'fill': 'none'
            })

        svglinearChart.selectAll('text')
            .data(data)
            .enter()
            .append('text')
            .text(d => {
                console.log('text:', d)
                return d.sales > 20 ? d.sales : ''
            })
            .attrs({
                'font-size': '14px',
                x: d => xScale(d.week) - 5,
                y: d => yScale(d.sales) - 15,
                'text-anchor': 'start',
                'fill': 'black',
                class: 'text-labels'
            })

        d3.select('#select-chart-type')
            .on('change', d => {
                const val = d3.select('#select-chart-type').node().value,
                    lineFun = d3.svg.line()
                        .x(d => xScale(d.week) + 20)
                        .y(d => yScale(d.sales) - 15)
                        .interpolate(val)

                svglinearChart.select('path')
                    .attrs({
                        'd': lineFun(data),
                        'stroke': 'grey',
                        'stroke-width': 2,
                        'fill': 'none'
                    })
            })

        d3.select('#select-options')
            .on('change', d => {
                const val = d3.select('#select-options').node().value

                svglinearChart.selectAll('text')
                    .data(data)
                    .text(d => {
                        switch (val) {
                            case 'all':
                                return d.sales
                                break;
                            case 'minmax':
                                const min = d3.min(data, d => +d.sales),
                                    max = d3.max(data, d => +d.sales)

                                if (+d.sales === min || +d.sales === max) {
                                    return d.sales
                                } else {
                                    return ''
                                }
                                break;
                            default:
                                return ''
                        }
                    })
                    .attrs({
                        'font-size': '14px',
                        x: d => xScale(d.week) - 5,
                        y: d => yScale(d.sales) - 15,
                        'text-anchor': 'start',
                        'fill': 'black',
                        class: 'text-labels'
                    })
            })


        svglinearChart.selectAll('circle')
            .data(data)
            .enter()
            .append('circle')
            .attrs({
                cx: d => xScale(d.week) + 20,
                cy: d => yScale(d.sales) - 15,
                r: 5,
                fill: d => d.sales > 20 ? 'red' : 'black'
            })

        const yAxis = svglinearChart.append('g')
            .call(yAxisGen)
            .attr('class', 'axis')
            .attr('transform', 'translate(20, -15)'),
            xAxis = svglinearChart.append('g')
                .call(xAxisGen)
                .attr('class', 'axis')
                .attr('transform', `translate(20, ${h - 20})`)
    }
}

function getChartWithSeveralAxis(context) {
    const randomFromInterval = (min, max) => (Math.random() * (max - min + 1) + min).toFixed(2),
        colorChartDataGenerator = () => {
            let parseDate = d3.time.format("%d-%b-%y").parse,
                startDate = parseDate('1-May-12')

            return [...Array(7)].map((el, i) => ({
                'date': startDate.setDate(startDate.getDate() + 1),
                'close': +randomFromInterval(50, 650),
                'open': +randomFromInterval(0, 55),
                'myD': +randomFromInterval(20, 150)
            }))
        }

    var margin = { top: 30, right: 40, bottom: 30, left: 50 },
        width = 1050 - margin.left - margin.right,
        height = 270 - margin.top - margin.bottom;

    var parseDate = d3.time.format("%d-%b-%y").parse;

    var x = d3.time.scale().range([0, width]);
    var y0 = d3.scale.linear().range([height, 0]);
    var y1 = d3.scale.linear().range([height, 0]);
    var y2 = d3.scale.linear().range([height, 0]);

    var xAxis = d3.svg.axis().scale(x)
        .orient("bottom").ticks(5);

    var yAxisLeft = d3.svg.axis().scale(y0)
        .orient("left").ticks(5);

    var yAxisRight = d3.svg.axis().scale(y1)
        .orient("right").ticks(5);

    var yAxisRight2 = d3.svg.axis().scale(y2)
        .orient("right").ticks(5);

    var valueline = d3.svg.line()
        .x(function (d) { return x(d.date); })
        .y(function (d) { return y0(d.close); });

    var valueline2 = d3.svg.line()
        .x(function (d) { return x(d.date); })
        .y(function (d) { return y1(d.open); });

    var valueline3 = d3.svg.line()
        .x(function (d) { return x(d.date); })
        .y(function (d) { return y2(d.myD); });

    var svg = d3.select(context.refs.chartWithSeveralAxis)
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

    // Get the data
    // const data = [{"date":"1-May-12","close":58.13,"open":3.41},{"date":"30-Apr-12","close":53.98,"open":4.55},{"date":"27-Apr-12","close":67,"open":6.78},{"date":"26-Apr-12","close":89.7,"open":7.85},{"date":"25-Apr-12","close":99,"open":8.92},{"date":"24-Apr-12","close":130.28,"open":9.92},{"date":"23-Apr-12","close":166.7,"open":10.13},{"date":"20-Apr-12","close":234.98,"open":12.23},{"date":"19-Apr-12","close":345.44,"open":13.45},{"date":"18-Apr-12","close":443.34,"open":16.04},{"date":"17-Apr-12","close":543.7,"open":18.03},{"date":"16-Apr-12","close":580.13,"open":21.02},{"date":"13-Apr-12","close":605.23,"open":22.34},{"date":"12-Apr-12","close":622.77,"open":20.15},{"date":"11-Apr-12","close":626.2,"open":21.26},{"date":"10-Apr-12","close":628.44,"open":31.04},{"date":"9-Apr-12","close":636.23,"open":35.04},{"date":"5-Apr-12","close":633.68,"open":41.02},{"date":"4-Apr-12","close":624.31,"open":43.05},{"date":"3-Apr-12","close":629.32,"open":46.03},{"date":"2-Apr-12","close":618.63,"open":51.03},{"date":"30-Mar-12","close":599.55,"open":53.42},{"date":"29-Mar-12","close":609.86,"open":57.82},{"date":"28-Mar-12","close":617.62,"open":59.01},{"date":"27-Mar-12","close":614.48,"open":56.03},{"date":"26-Mar-12","close":606.98,"open":58.01}]
    const data = colorChartDataGenerator()

    // data.forEach(function (d) {
    //     d.date = parseDate(d.date);
    // });

    // Scale the range of the data
    x.domain(d3.extent(data, function (d) { return d.date; }));
    y0.domain([0, d3.max(data, function (d) {
        return Math.max(d.close);
    })]);
    y1.domain([0, d3.max(data, function (d) {
        return Math.max(d.open);
    })]);
    y2.domain([0, d3.max(data, function (d) {
        return Math.max(d.myD);
    })]);

    svg.append("path")        // Add the valueline path.
        .attr("d", valueline(data));

    svg.append("path")        // Add the valueline2 path.
        .style("stroke", "red")
        .attr("d", valueline2(data));

    svg.append("path")        // Add the valueline2 path.
        .style("stroke", "green")
        .attr("d", valueline3(data));

    svg.append("g")            // Add the X Axis
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    svg.append("g")
        .attr("class", "y axis")
        .style("fill", "steelblue")
        .call(yAxisLeft);

    svg.append("g")
        .attr("class", "y axis")
        .attr("transform", "translate(" + width + " ,0)")
        .style("fill", "red")
        .call(yAxisRight);

    svg.append("g")
        .attr("class", "y axis")
        .attr("transform", "translate(" + (width - 40) + " ,0)")
        .style("fill", "green")
        .call(yAxisRight2);
}

function getChartNvd(context) {
    nv.addGraph(function () {
        var chart = nv.models.lineWithFocusChart();

        chart.xAxis
            .tickFormat(d3.format(',f'));

        chart.yAxis
            .tickFormat(d3.format(',.2f'));

        chart.y2Axis
            .tickFormat(d3.format(',.2f'));

        d3.select(context.refs.chartNvd3)
            .datum(testData())
            .transition().duration(500)
            .call(chart);

        nv.utils.windowResize(chart.update);

        return chart;
    });
    /**************************************
     * Simple test data generator
     */

    /* Inspired by Lee Byron's test data generator. */
    function stream_layers(n, m, o) {
        if (arguments.length < 3) o = 0;
        function bump(a) {
            var x = 1 / (.1 + Math.random()),
                y = 2 * Math.random() - .5,
                z = 10 / (.1 + Math.random());
            for (var i = 0; i < m; i++) {
                var w = (i / m - y) * z;
                a[i] += x * Math.exp(-w * w);
            }
        }
        return d3.range(n).map(function () {
            var a = [], i;
            for (i = 0; i < m; i++) a[i] = o + o * Math.random();
            for (i = 0; i < 5; i++) bump(a);
            return a.map(stream_index);
        });
    }

    /* Another layer generator using gamma distributions. */
    function stream_waves(n, m) {
        return d3.range(n).map(function (i) {
            return d3.range(m).map(function (j) {
                var x = 20 * j / m - i / 3;
                return 2 * x * Math.exp(-.5 * x);
            }).map(stream_index);
        });
    }

    function stream_index(d, i) {
        return { x: i, y: Math.max(0, d) };
    }

    function testData() {
        return stream_layers(3, 128, .1).map(function (data, i) {
            return {
                key: '' + (i + 1),
                values: data
            };
        });
    }
}

class ChartsDemoPage extends React.Component {
    componentDidMount() {
        getChartNvd(this)
        getChartZoomed(this)
        getChartWithColorZones(this)
        getChartCsv(this)
        getChartWithSeveralAxis(this)
    }

    render() {
        return (
            <div className="chart-demo-page">

                <section className="chart-block">
                    <header>
                        <h1>Chart with zoom:</h1>
                    </header>
                    <div className="chart-with-zoom">
                        <svg ref="chartWithZoom"></svg>
                    </div>
                </section>

                <section className="chart-block">
                    <header>
                        <h1>Chart with color zones:</h1>
                    </header>
                    <svg ref="chartWithColorZones"></svg>
                </section>

                <section className="chart-block">
                    <header>
                        <h1>Chat with several axis:</h1>
                    </header>
                    <div className="chart-with-several-axis">
                        <svg ref="chartWithSeveralAxis"></svg>
                    </div>
                </section>

                {/*<section className="chart-block">
                    <header>
                        <h1>Chart with Real time data:</h1>
                    </header>
                    <ChartD3RealTime/>
                </section>*/}

                <section className="chart-block">
                    <header>
                        <h1>Chart NVD3:</h1>
                    </header>
                    <div className="chart-nvd3">
                        <svg ref="chartNvd3"></svg>
                    </div>
                </section>

                <section className="chart-block">
                    <header>
                        <h1>Configurable chart:</h1>
                    </header>
                    <div className="chart-csv">
                        <p>
                            <span className="select-title">Show labels for</span>
                            <select id="select-options">
                                <option value="all">All</option>
                                <option value="minmax">Min/Max</option>
                                <option value="none">none</option>
                            </select>

                            <span className="select-title">Select chart type</span>
                            <select id="select-chart-type">
                                <option value="linear">Linear</option>
                                <option value="step-before">Step</option>
                                <option value="cardinal">cardinal</option>
                            </select>
                        </p>
                        <svg ref="chartCsv"></svg>
                    </div>
                </section>

            </div>
        )
    }
}

export default ChartsDemoPage
